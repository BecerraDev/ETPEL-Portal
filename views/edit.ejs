
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">

    <title>ETPEL</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
   
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" type="text/css"  media="screen" href="../css/edit.css" />
   <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">


<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


</head>
<body>
    
<!-- Bootstrap NavBar -->




<!-- Bootstrap row -->
<div class="row" id="body-row">
  <!-- Sidebar -->
  <div id="sidebar-container" class="sidebar-expanded d-none d-md-block">
      <!-- d-* hiddens the Sidebar in smaller devices. Its itens can be kept on the Navbar 'Menu' -->
      <!-- Bootstrap List Group -->
      <ul class="list-group">
          <!-- Separator with title -->
          <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed">
              <small> MENU PRINCIPAL</small>
          </li>

          <!-- /END Separator -->
          <!-- Menu with submenu -->
          <a href="#submenu1" data-toggle="collapse" aria-expanded="false" class="bg-dark list-group-item list-group-item-action flex-column align-items-start">
              <div class="d-flex w-100 justify-content-start align-items-center">
                <span class="fa fa-user fa-fw mr-3"></span>
                <span class="menu-collapsed">Inicio</span>
                  <span class="submenu-icon ml-auto"></span>

              </div>
          </a>
          <!-- Submenu content -->
          <div id='submenu1' class="collapse sidebar-submenu">
             <% if (rut) { %>
              <a href="/perfildocente/<%=rut.rut%>/<%=rut.id_rol%>" class="list-group-item list-group-item-action bg-secondary font-weight: bolder;">
                  <span class="menu-collapsed selectbotton">Mi cuenta</span>
              </a>
              <input type="text" hidden value="<%= rut.rut %>" name="rut" id="rut">
              <a href="/actualizardatosdocente/<%= rut.rut %>" class="list-group-item list-group-item-action bg-dark text-white">
                  <span class="menu-collapsed">Editar cuenta</span>
              </a>
        
          </div>
          <a href="#submenu2" data-toggle="collapse" aria-expanded="false" class="bg-dark list-group-item list-group-item-action flex-column align-items-start">
              <div class="d-flex w-100 justify-content-start align-items-center">
                <span class="fa fa-dashboard fa-fw mr-3"></span>
                <span class="menu-collapsed">Publicación</span>
                  <span class="submenu-icon ml-auto"></span>
              </div>
          </a>


          <!-- Submenu content -->
          <div id='submenu2' class="collapse sidebar-submenu">

            <a href="/publicar/<%= rut.rut %>" class="list-group-item list-group-item-action bg-dark text-white">
              <span class="menu-collapsed">Nueva publicación</span>
          </a>
              <a href="/publicaciones/<%= rut.rut %>" class="list-group-item list-group-item-action bg-dark text-white">
                <span class="menu-collapsed">Visualizar y editar</span>                </a>
            


          </div>
          <a href="#submenu3" data-toggle="collapse" aria-expanded="false" class="bg-dark list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-start align-items-center">
              <span class="fa fa-envelope-o fa-fw mr-3"></span>
              <span class="menu-collapsed">Mensaje</span>
                <span class="submenu-icon ml-auto"></span>
            </div>
        </a>    
        <div id='submenu3' class="collapse sidebar-submenu">
      
      
          <a href="/bandejadeentrada/<%=rut.rut%>" class="list-group-item list-group-item-action bg-dark text-white">
            <span class="menu-collapsed">Bandeja de mensajes</span>
        </a>
        <a href="/chat" class="list-group-item list-group-item-action bg-dark text-white">
          <span class="menu-collapsed">Charla global</span>
      </a>
         </div>
         <% } %>
          </a>
          <!-- Separator without title -->
          <li class="list-group-item sidebar-separator menu-collapsed"></li>
          <!-- /END Separator -->
          <a href="/logout" class="bg-dark list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-start align-items-center">
                  <span class="fa fa-power-off fa-fw mr-3"></span>
                  <span class="menu-collapsed">Cerrar sesión</span>
              </div>
          </a>
          <a href="#top" data-toggle="sidebar-colapse" class="bg-dark list-group-item list-group-item-action d-flex align-items-center">
              <div class="d-flex w-100 justify-content-start align-items-center">
                  <span id="collapse-icon" class="fa fa-2x mr-3"></span>
                  <span id="collapse-text" class="menu-collapsed"></span>
              </div>
          </a>
      </ul><!-- List Group END-->
  </div><!-- sidebar-container END -->


    <div class="col p-6 colorfondo">

   


      <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
        <div class="container-fluid">
        <!-- Brand -->
        <a class="titulo" href="#">
          ETPEL    </a>
        <!-- Form -->
       
        <!-- User -->

   
  
        <span></span>
        </div>
       





      
      
    </nav><!-- NavBar END -->


 
      <!------ MENU---------->
      
   
   
      <div class="main-content">
        <div class="container mt-7">
        <!-- Table -->

        <div class="row">
        <div class="col-xl-8 m-auto order-xl-1">
        <div class="card bg-secondary shadow">
        <div class="card-header bg-white border-0">
        <div class="row align-items-center">
        <div class="col-8">
        <h3 class="mb-0">Editar publicación</h3>
        </div>
       
        </div>
        </div>
        <div class="card-body">
          <% if (user) { %>

         <form action="/update" method="POST">
        <h6 class="heading-small text-muted mb-4">Detalle de la clase</h6>
        <div class="pl-lg-4">
          <div class="row">
     
              <input id="id_publicacion" name="id_publicacion" value="<%= user.id_publicacion %>" hidden>
       

     
    
            <div class="col-lg-6">
            <div class="form-group">
    
              <label class="form-control-label" for="input-select"> Modalidad</label>
          


                <select id="modalidad" name="modalidad" class="form-control selectcontrol form-select"  value="<%= user.modalidad_nombre %>" tabindex="2">
                  <option <%= user.modalidad_nombre=='Online' ? "selected" : '' %> value="1">Online</option>
                  <option <%= user.modalidad_nombre=='presencial' ? "selected" : '' %> value="2">Presencial</option>
                  <option <%= user.modalidad_nombre=='presencialyonline' ? "selected" : '' %> value="3">Presencial y Online</option>
    
                </select>
            </div>
            <div class="form-group focused">
              <label class="form-control-label" for="input-last-name">Precio</label>
              <input type="number" id="precio" name="precio" class="form-control form-control-alternative" value="<%= user.precio  %>" required>
              </div>
            </div>
            </div>
        <div class="row">
        <div class="col-lg-6">

        </div>
        <div class="col-lg-6">
        
        </div>
        </div>
        </div>
        <hr class="my-4">
        <!-- Address -->
        <h6 class="heading-small text-muted mb-4">Información de contacto</h6>
        <div class="pl-lg-4">
        <div class="row">
        <div class="col-md-12">
       
        </div>
        </div>
        <div class="row">
        <div class="col-lg-4">
        <div class="form-group focused">
        <label class="form-control-label" for="input-city">Región</label>
        
        <select id="region-dropdown"  class="form-control form-control-alternative selectcontrol" style="height:45px; width: 650px;"  required>
          <option value="">Seleccione su region</option>
          <% if(data.length){
          for(var i = 0; i< data.length; i++) {%> 
          <option value="<%= data[i].id_region%>">
          <%= data[i].nombre_region%>
          </option>
          <% } } %>
          </select>
         

        </div>
        </div>
      </div>

        <div class="row">


          <div class="col-lg-6">
          <div class="form-group focused">
  
            <label class="form-control-label" for="input-select"> Ciudad</label>
  
            <select  id="ciudad-dropdown" class="form-control form-control-alternative selectcontrol" >
            </select>
          
          </span> 
          </div>
          </div>
  
          <div class="col-lg-6">
          <div class="form-group">
  
            <label class="form-control-label" for="input-select">Comuna</label>
            <select  id="comuna-dropdown" name="comuna" class="form-control form-control-alternative selectcontrol" >
            </select>     
  
  
  
  
  
          </div>
          </div>
        </div>
        </div>
        <hr class="my-4">
        <!-- Description -->
        <div class="pl-lg-4">
          
        <div class="form-group focused">


          <div class="form-group focused">
            <label class="form-control-label" for="input-address">Titulo</label>
            <input id="titulo" name="titulo"class="form-control form-control-alternative" value="<%= user.titulo %>" type="text">
            </div>

            <div class="form-group focused">
              <label class="form-control-label" for="input-address">Resumen</label>
              <textarea rows="4" id="resumen" name="resumen" class="form-control form-control-alternative" maxlength="200" > <%= user.resumen %> </textarea>
            </div>
            <label class="form-control-label" for="input-address">Contenido de la clase</label>
        <textarea rows="20" id="contenido" name="contenido"class="form-control form-control-alternative"  maxlength="2000" ><%= user.contenido %> </textarea>
        </div>
        </div>
          <span class="badge bg-info" style="display:none;"><%= user.nombre %></span>
        <div class="" style="margin: 0 auto; text-align: center;">


          <div class="row" >
                                  
            <div class="col-lg-6">
              <button type="submit" href="" class="btn btn-default"> ACTUALIZAR </a>
      
                                      <!--Read More Button-->
            </div>
            <div class="col-lg-6">
                  
              <a href="perfildocente/<%= user.rut %>" class="btn btn-danger"> REGRESAR </a>
      
            </div>
          </div>
        </div>
      <% } %> 
    </form>

        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
    

<footer class="py-5 bg-dark">
  <div class="container ">
  <div class="row align-items-center justify-content-xl-between">
  <div class="col-xl-6">
  <div class="copyright text-center text-xl-left text-muted">
  © 2022 <a class="font-weight-bold ml-1" target="_blank">Proyecto de Titulo</a>
  </div>
  </div>
  <div class="col-xl-6">
  <ul class="nav nav-footer justify-content-center justify-content-xl-end">
  <li class="nav-item">
  <a href="/" class="nav-link" target="_blank">ETPEL</a>
  </li>
  <li class="nav-item">
  <a href="/" class="nav-link" target="_blank">Acerca de nosotros</a>
  </li>
  <li class="nav-item">
  </li>
  </ul>
  </div>
  </div>
  </div>
  </footer>

        </body>
        

        <script >
          $(document).ready(function() {
          $('#region-dropdown').on('change', function() {
          var region_id = this.value;
          $("#ciudad-dropdown").html('');
          $.ajax({
          url: "http://localhost:3000/get-states-by-country",
          type: "POST",
          data: {
          name: 'country',
          region_id: region_id,
          },
          dataType: 'json',
          success: function(result) {
          $('#ciudad-dropdown').html('<option value="">Selecciona una ciudad</option>');
          $.each(result.states, function(key, value) {
          $("#ciudad-dropdown").append('<option value="' + value.id_ciudad + '">' + value.nombre_ciudad + '</option>');
          });
          $('#comuna-dropdown').html('<option value="">Selecciona una ciudad primero </option>');
          }
          });
          });
          $('#ciudad-dropdown').on('change', function() {
          var ciudad_id = this.value;
          $("#comuna-dropdown").html('');
          $.ajax({
          url: "http://localhost:3000/get-cities-by-state",
          type: "POST",
          data: {
          name: 'state',
          ciudad_id: ciudad_id,
          },
          dataType: 'json',
          success: function(result) {
          $('#comuna-dropdown').html('<option value="">Seleccione comuna</option>');
          $.each(result.cities, function(key, value) {
          $("#comuna-dropdown").append('<option value="' + value.id_comuna + '">' + value.nombre_comuna + '</option>');
          });
          }
          });
          });
          }); 
          </script>
        
   


</div><!-- body-row END -->	<script type="text/javascript">
	// Hide submenus
$('#body-row .collapse').collapse('hide'); 

// Collapse/Expand icon
$('#collapse-icon').addClass('fa-angle-double-left'); 

// Collapse click
$('[data-toggle=sidebar-colapse]').click(function() {
    SidebarCollapse();
});

function SidebarCollapse () {
    $('.menu-collapsed').toggleClass('d-none');
    $('.sidebar-submenu').toggleClass('d-none');
    $('.submenu-icon').toggleClass('d-none');
    $('#sidebar-container').toggleClass('sidebar-expanded sidebar-collapsed');
    
    // Treating d-flex/d-none on separators with title
    var SeparatorTitle = $('.sidebar-separator-title');
    if ( SeparatorTitle.hasClass('d-flex') ) {
        SeparatorTitle.removeClass('d-flex');
    } else {
        SeparatorTitle.addClass('d-flex');
    }
    
    // Collapse/Expand icon
    $('#collapse-icon').toggleClass('fa-angle-double-left fa-angle-double-right');
}	</script>
</body>
</html>
